{"version":3,"sources":["assets/js/loader.js","assets/js/main.js"],"names":["Loader","options","elements","loaders","transitionEndEventName","getTransitionEndEventName","afterShowFired","afterHideFired","defaultOptions","image","loadingImage","backgroundClass","loaderClass","container","document","createElement","classList","add","style","transition","inner","setAttribute","appendChild","opacity","addEventListener","e","target","length","afterShow","shift","afterHide","remove","after","Array","from","map","elem","push","HTMLElement","querySelector","element","loader","create_loader","position","top","left","width","height","tagName","toLowerCase","append","setTimeout","transitions","bodyStyle","body","undefined","ldr","preventDefault","show","window","hide","alert","querySelectorAll"],"mappings":"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","file":"main.c1fe1e58.js","sourceRoot":"../src","sourcesContent":["import loadingImage from \"../img/loader_black.gif\";\n\nclass Loader {\n    constructor(options) {\n        this.elements = [];\n        this.loaders = [];\n        this.transitionEndEventName = getTransitionEndEventName();\n        this.afterShowFired = false;\n        this.afterHideFired = false;\n        \n        this.defaultOptions = {\n            image: loadingImage,\n            backgroundClass: \"loader_background\",\n            loaderClass: \"loader_inner\"\n        };\n        this.options = { ...this.defaultOptions, ...options };\n    }\n\n    create_loader() {\n        let container = document.createElement(\"div\");\n        container.classList.add(this.options.backgroundClass);\n        container.style.transition = 'all 200ms';\n\n        let inner = document.createElement(\"div\");\n        inner.classList.add(this.options.loaderClass);\n\n        let image = document.createElement(\"img\");\n        image.setAttribute(\"src\", this.options.image);\n\n        inner.appendChild(image);\n        container.appendChild(inner);\n\n        container.style.opacity = \"0\";\n\n        container.addEventListener(this.transitionEndEventName, (e) => {\n            if (e.target.style.opacity === \"1\") {\n                // show animation finished\n                if (this.loaders.length >= this.elements.length && this.options.afterShow && !this.afterShowFired) {\n                    this.options.afterShow();\n                    this.afterShowFired = true;\n                }\n            } else if (e.target.style.opacity === \"0\") {\n                // hide animation finished\n                this.loaders.shift();\n                this.elements.shift();\n                if (this.options.afterHide && this.loaders.length < 1 && !this.afterHideFired) {\n                    this.options.afterHide();\n                    this.afterHideFired = true;\n                }\n                e.target.remove();\n            }\n        });\n\n        return container;\n    }\n\n    show(options) {\n        this.afterShowFired = false;\n        if (options && options.after && typeof options.after == \"function\") {\n            this.options.afterShow = options.after;\n        } else {\n            this.options.afterShow = null;\n        }\n        if (options && options.elements) {\n            if (options.elements.length > 1) {\n                Array.from(options.elements).map((elem) => {\n                    return this.elements.push(elem);\n                });\n            } else if (options.elements instanceof HTMLElement) {\n                this.elements.push(options.elements);\n            }\n        } else {\n            this.elements.push(document.querySelector('body'));\n        }\n\n        this.elements.map((element) => {\n            var loader = this.create_loader();\n\n            if (!element.style.position) {\n                element.style.position = 'relative';\n            }\n\n            loader.style.top = '0';\n            loader.style.left = '0';\n            loader.style.width = '100%';\n            loader.style.height = '100%';\n\n            if (element.tagName.toLowerCase() === 'body') {\n                loader.style.position = \"fixed\";\n            } else {\n                loader.style.position = \"absolute\";\n            }\n\n            this.loaders.push(loader);\n            element.append(loader);\n            \n            setTimeout(() => {\n                loader.style.opacity = \"1\";\n            }, 50);\n\n            return true;\n        });\n    };\n\n    hide(options) {\n        this.afterHideFired = false;\n        if (options && options.after && typeof options.after == \"function\") {\n            this.options.afterHide = options.after;\n        } else {\n            this.options.afterHide = null;\n        }\n        if (this.loaders) {\n            this.loaders.map((element) => {\n                return (setTimeout(() => {\n                    element.style.opacity = \"0\";\n                }, 50));\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction getTransitionEndEventName() {\n    var transitions = {\n        \"transition\"      : \"transitionend\",\n        \"OTransition\"     : \"oTransitionEnd\",\n        \"MozTransition\"   : \"transitionend\",\n        \"WebkitTransition\": \"webkitTransitionEnd\"\n    }\n    let bodyStyle = document.body.style;\n    for(let transition in transitions) {\n        if(bodyStyle[transition] !== undefined) {\n            return transitions[transition];\n        } \n    }\n}\n\nexport default Loader;","import Loader from './loader';\nimport loadingImage from '../img/loader_black.gif';\n\nconst ldr = new Loader({\n    image: loadingImage\n});\n\ndocument.querySelector('#show3').addEventListener('click', (e) => {\n    e.preventDefault();\n    ldr.show({\n        after: function() {\n            window.setTimeout(function () {\n                ldr.hide({\n                    after: () => {\n                        alert('loading finished');\n                    }\n                });\n            }, 3000);\n        }\n    });\n})\n\ndocument.querySelector(\"#showPre\").addEventListener(\"click\", e => {\n    e.preventDefault();\n    ldr.show({\n        elements: document.querySelectorAll(\"pre\"),\n        after: function() {\n            window.setTimeout(function() {\n                ldr.hide({\n                    after: () => {\n                        alert(\"loading finished\");\n                    }\n                });\n            }, 3000);\n        }\n    });\n});\n"]}